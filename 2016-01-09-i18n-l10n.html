<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="David Peng" />
  <meta name="dcterms.date" content="2016-01-09" />
  <title>DP – 国际化和本地化</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link rel="shortcut icon" type="image/png" href="https://cdn.jsdelivr.net/gh/duzyn/img/favicon.png"/>
  <link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/duzyn/img/apple-touch-icon.png">
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-18121046-9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-18121046-9');
  </script>
</head>
<body>
<div style="text-align:center">
  <a href="/index.html">
    <img src="https://cdn.jsdelivr.net/gh/duzyn/img/apple-touch-icon.png" alt="DP" style="height:48px;width:48px;border-radius: 24px;">
  </a>
</div>
<header id="title-block-header">
<h1 class="title">国际化和本地化</h1>
<p class="author">David Peng</p>
<p class="date">2016-01-09</p>
</header>
<p>关于软件产品国际化和本地化的学习笔记。需要考虑字符、编码、货币、日期和时间的格式、数字、单位等等。</p>
<h2 id="用户在使用软件时遇到的问题">用户在使用软件时遇到的问题</h2>
<p>用户因为文化的不同有一些常见的差异。</p>
<h3 id="字符和编码">字符和编码</h3>
<p>美国的编码一般是 ASCII，这个编码只包含常用的英文字符和英文标点，欧洲语言的人使用的是 ISO 8859-1 编码，而亚洲语言字符更多，编码会更复杂。简体中文常用 GB2312, GBK, GB18030，繁体中文常用 BIG-5。现代的操作系统都支持 Unicode 编码，常用的是 UTF-8，这种编码包含了世界上大多数语言的字符。</p>
<h3 id="货币">货币</h3>
<p>每个国家的货币单位未必是一样的。比如美国用的是美元，符号是 $，中国是人民币，符号是 ￥，欧洲是欧元，等等。货币是和人们的生活息息相关的，使用本地货币单位会更方便。</p>
<h3 id="日期和时间">日期和时间</h3>
<p>每个国家表示日期和时间也未必是一样的。比如日期 1994 年 12 月 25 日，在美国表示为 12/25/94，在澳大利亚表示为 25/12/94，有些国家又是以 <a href="http://www.iso.org/iso/iso8601">ISO 8601</a> 日期规范表示的，为 1994-12-25。</p>
<p>时间有的表示是 hh:mm 或 hh.mm。有的使用 12 小时制，比如 10:10 PM，有的使用 24 小时制，比如 22:10。</p>
<h3 id="数字">数字</h3>
<p>各个国家的数字表示也未必一样。表示 12345.67 这个数的方法：</p>
<p>英语表示：12,345.67 德语表示：12.345,67 法语表示：12345,67 亚洲表示：1,2345.67</p>
<h3 id="单位">单位</h3>
<p>每个国家的度量衡单位也不一致。比如英语用英里，我国用公里和里。</p>
<h3 id="消息">消息</h3>
<p>最主要的部分是语言本身的所有句子或字符。</p>
<h2 id="使用-gettext-来实现本地语言支持">使用 gettext 来实现本地语言支持</h2>
<p>PO（Portable Object）文件包含所有的字符串和对应的翻译。先由 xgettext 生成 POT 文件（PO Template），不包含翻译，只包含代码中的字符串。用 msgmerge 可以转成 PO 文件，每一个 PO 文件对应一个语言包。PO 用于翻译者阅读，每个翻译者翻译对应的 PO 文件。翻译完成后用 msgfmt 可以转成 MO 文件。MO（Machine Object）文件是二进制文件，用于计算机读取。</p>
<h3 id="本地格式的表示法">本地格式的表示法</h3>
<p>语言格式表示为“ll_CC”，其中 ll 是 <a href="http://www.iso.org/iso/home/standards/language_codes.htm">ISO 639</a> 规定的语言编码，CC 是 <a href="http://www.iso.org/iso/country_codes.htm">ISO 3166</a> 规定的国家编码。比如德语是“de_DE”，简体中文是“zh_CN”。‘ll_CC.encoding’在语言后指定编码，比如 de_DE.UTF-8。</p>
<p>使用 <code>locale -a | grep '^ll'</code> 命令可以查看系统支持的语言。</p>
<h2 id="准备翻译">准备翻译</h2>
<p>要将被翻译的句子以良好的语法写好，使用正确的英语格式，完整的句子，在段落处分开，使用常规的字符而不是拼接的，避免不常见的标记或控制符。</p>
<p>不要将一个句子分开为几句，然后再拼接起来，否则会造成翻译错误，因为翻译人员在翻译时不会知道这几个句子是关联的，也不会去看源码。</p>
<p>可以设置关键字来代替 gettext，比如使用 ‘_’。<code>_("Translatable string")</code> 等同于 <code>gettext ("Translatable string")</code></p>
<pre><code>#include &lt;libintl.h&gt;
#define _(String) gettext (String)</code></pre>
<p>©2020 David Peng | 采用 <a href="https://pandoc.org/" target="_blank">Pandoc</a> 搭建</p>
</body>
</html>
